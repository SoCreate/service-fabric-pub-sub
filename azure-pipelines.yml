trigger:
  - master
pr: none
pool:
  name: Hosted Windows 2019 with VS2019
variables:
  buildConfiguration: Release
  projectPaths: src/**/*.csproj
  testProjectPaths: 'tests/**/*[Tt]ests/*.csproj'
steps:
  - task: DotNetCoreCLI@2
    displayName: Test
    inputs:
      command: test
      projects: $(testProjectPaths)
      arguments: '--configuration $(BuildConfiguration)'
  - task: DotNetCoreCLI@2
    displayName: Restore
    inputs:
      command: restore
      projects: $(projectPaths)
  - task: DotNetCoreCLI@2
    displayName: Build
    inputs:
      projects: $(projectPaths)
      arguments: '--configuration $(buildConfiguration)'
